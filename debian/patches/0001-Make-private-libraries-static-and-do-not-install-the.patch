From: "Daniele E. Domenichelli" <ddomenichelli@drdanz.it>
Date: Thu, 18 Aug 2016 19:39:39 +0200
Subject: Make private libraries static and do not install the libraries and
 the headers

---
 src/carriers/CMakeLists.txt               | 20 ++++++++++----------
 src/devices/CMakeLists.txt                | 20 ++++++++++----------
 src/libYARP_logger/CMakeLists.txt         | 20 ++++++++++----------
 src/libYARP_manager/CMakeLists.txt        | 20 ++++++++++----------
 src/libYARP_name/CMakeLists.txt           | 26 +++++++++++++-------------
 src/libYARP_serversql/CMakeLists.txt      | 20 ++++++++++----------
 src/libYARP_wire_rep_utils/CMakeLists.txt | 14 +++++++-------
 7 files changed, 70 insertions(+), 70 deletions(-)

diff --git a/src/carriers/CMakeLists.txt b/src/carriers/CMakeLists.txt
index bf47399..0eb84e7 100644
--- a/src/carriers/CMakeLists.txt
+++ b/src/carriers/CMakeLists.txt
@@ -19,16 +19,16 @@ yarp_begin_plugin_library(yarpcar)
 yarp_end_plugin_library(yarpcar)
 add_library(YARP::yarpcar ALIAS yarpcar)
 
-install(TARGETS yarpcar
-        EXPORT YARP
-        COMPONENT runtime
-        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
-        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}")
-
-if(YARP_LINK_PLUGINS)
-  set_property(GLOBAL APPEND PROPERTY YARP_LIBS yarpcar ${yarpcar_LIBRARIES})
-endif()
+#install(TARGETS yarpcar
+#        EXPORT YARP
+#        COMPONENT runtime
+#        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+#        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}")
+#
+#if(YARP_LINK_PLUGINS)
+#  set_property(GLOBAL APPEND PROPERTY YARP_LIBS yarpcar ${yarpcar_LIBRARIES})
+#endif()
 
 set_property(TARGET yarpcar PROPERTY FOLDER "Plugins/Carrier")
 
diff --git a/src/devices/CMakeLists.txt b/src/devices/CMakeLists.txt
index 3874c5d..22edcd1 100644
--- a/src/devices/CMakeLists.txt
+++ b/src/devices/CMakeLists.txt
@@ -90,15 +90,15 @@ yarp_end_plugin_library(yarpmod)
 add_library(YARP::yarpmod ALIAS yarpmod)
 
 
-install(TARGETS yarpmod
-        EXPORT YARP
-        COMPONENT runtime
-        RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
-        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
-        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
-
-if (YARP_LINK_PLUGINS)
-  set_property(GLOBAL APPEND PROPERTY YARP_LIBS yarpmod ${yarpmod_LIBRARIES})
-endif()
+#install(TARGETS yarpmod
+#        EXPORT YARP
+#        COMPONENT runtime
+#        RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
+#        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
+#        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
+#
+#if (YARP_LINK_PLUGINS)
+#  set_property(GLOBAL APPEND PROPERTY YARP_LIBS yarpmod ${yarpmod_LIBRARIES})
+#endif()
 
 set_property(TARGET yarpmod PROPERTY FOLDER "Plugins/Device")
diff --git a/src/libYARP_logger/CMakeLists.txt b/src/libYARP_logger/CMakeLists.txt
index 52cd531..3cf2974 100644
--- a/src/libYARP_logger/CMakeLists.txt
+++ b/src/libYARP_logger/CMakeLists.txt
@@ -54,15 +54,15 @@ endif()
 set_property(TARGET YARP_logger PROPERTY PUBLIC_HEADER ${YARP_logger_HDRS})
 set_property(TARGET YARP_logger PROPERTY PRIVATE_HEADER ${YARP_logger_IMPL_HDRS})
 
-install(TARGETS YARP_logger
-        EXPORT YARP
-        COMPONENT runtime
-        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
-        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/logger"
-        PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/logger/impl")
-
-set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_logger)
+# install(TARGETS YARP_logger
+#         EXPORT YARP
+#         COMPONENT runtime
+#         RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+#         LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#         ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#         PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/logger"
+#         PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/logger/impl")
+#
+# set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_logger)
 set_property(TARGET YARP_logger PROPERTY INCLUDE_DIRS ${PROJECT_SOURCE_DIR}/include)
 set_property(TARGET YARP_logger PROPERTY FOLDER "Libraries/Private")
diff --git a/src/libYARP_manager/CMakeLists.txt b/src/libYARP_manager/CMakeLists.txt
index 08e5780..d794b89 100644
--- a/src/libYARP_manager/CMakeLists.txt
+++ b/src/libYARP_manager/CMakeLists.txt
@@ -113,16 +113,16 @@ if(CREATE_LIB_MANAGER)
   set_property(TARGET YARP_manager PROPERTY PUBLIC_HEADER ${YARP_manager_HDRS})
   set_property(TARGET YARP_manager PROPERTY PRIVATE_HEADER ${YARP_manager_IMPL_HDRS})
 
-  install(TARGETS YARP_manager
-          EXPORT YARP
-          COMPONENT runtime
-          RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
-          LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-          ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-          PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/manager"
-          PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/manager/impl")
-
-  set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_manager)
+#   install(TARGETS YARP_manager
+#           EXPORT YARP
+#           COMPONENT runtime
+#           RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+#           LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#           ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#           PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/manager"
+#           PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/manager/impl")
+#
+#   set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_manager)
   set_property(TARGET YARP_manager PROPERTY INCLUDE_DIRS ${PROJECT_SOURCE_DIR}/include)
   set_property(TARGET YARP_manager PROPERTY FOLDER "Libraries/Private")
 endif()
diff --git a/src/libYARP_name/CMakeLists.txt b/src/libYARP_name/CMakeLists.txt
index 226fdfa..af39e51 100644
--- a/src/libYARP_name/CMakeLists.txt
+++ b/src/libYARP_name/CMakeLists.txt
@@ -30,9 +30,9 @@ get_property(YARP_TREE_INCLUDE_DIRS GLOBAL PROPERTY YARP_TREE_INCLUDE_DIRS)
 include_directories(${YARP_TREE_INCLUDE_DIRS})
 include_directories(SYSTEM ${ACE_INCLUDE_DIRS})
 
-add_library(YARP_name ${YARP_name_SRCS}
-                      ${YARP_name_HDRS}
-                      ${YARP_name_IMPL_HDRS})
+add_library(YARP_name STATIC ${YARP_name_SRCS}
+                             ${YARP_name_HDRS}
+                             ${YARP_name_IMPL_HDRS})
 add_library(YARP::YARP_name ALIAS YARP_name)
 
 target_include_directories(YARP_name PUBLIC $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
@@ -44,15 +44,15 @@ target_link_libraries(YARP_name PRIVATE YARP::YARP_OS
 set_property(TARGET YARP_name PROPERTY PUBLIC_HEADER ${YARP_name_HDRS})
 set_property(TARGET YARP_name PROPERTY PRIVATE_HEADER ${YARP_name_IMPL_HDRS})
 
-install(TARGETS YARP_name
-        EXPORT YARP
-        COMPONENT runtime
-        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
-        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/name"
-        PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/name/impl")
-
-set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_name)
+#install(TARGETS YARP_name
+#        EXPORT YARP
+#        COMPONENT runtime
+#        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+#        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#        PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/name"
+#        PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/name/impl")
+#
+#set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_name)
 set_property(TARGET YARP_name PROPERTY INCLUDE_DIRS ${YARP_TREE_INCLUDE_DIRS})
 set_property(TARGET YARP_name PROPERTY FOLDER "Libraries/Private")
diff --git a/src/libYARP_serversql/CMakeLists.txt b/src/libYARP_serversql/CMakeLists.txt
index dcbbc0e..a8bb8c1 100644
--- a/src/libYARP_serversql/CMakeLists.txt
+++ b/src/libYARP_serversql/CMakeLists.txt
@@ -59,16 +59,16 @@ endif()
 set_property(TARGET YARP_serversql PROPERTY PUBLIC_HEADER ${YARP_serversql_HDRS})
 set_property(TARGET YARP_serversql PROPERTY PRIVATE_HEADER ${YARP_serversql_IMPL_HDRS})
 
-install(TARGETS YARP_serversql
-        EXPORT YARP
-        COMPONENT runtime
-        RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
-        LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-        PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/serversql"
-        PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/serversql/impl")
-
-set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_serversql)
+# install(TARGETS YARP_serversql
+#         EXPORT YARP
+#         COMPONENT runtime
+#         RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+#         LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#         ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#         PUBLIC_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/serversql"
+#         PRIVATE_HEADER DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/yarp/serversql/impl")
+#
+# set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_serversql)
 set_property(TARGET YARP_serversql PROPERTY INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/include
                                                          ${YARP_OS_INCLUDE_DIRS})
 set_property(TARGET YARP_serversql PROPERTY FOLDER "Libraries/Private")
diff --git a/src/libYARP_wire_rep_utils/CMakeLists.txt b/src/libYARP_wire_rep_utils/CMakeLists.txt
index 48887de..96e7b0f 100644
--- a/src/libYARP_wire_rep_utils/CMakeLists.txt
+++ b/src/libYARP_wire_rep_utils/CMakeLists.txt
@@ -26,11 +26,11 @@ if(CREATE_OPTIONAL_CARRIERS)
 
   set_property(TARGET YARP_wire_rep_utils PROPERTY INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR})
   set_property(GLOBAL APPEND PROPERTY YARP_LIBS YARP_wire_rep_utils)
-  install(TARGETS YARP_wire_rep_utils
-          EXPORT YARP
-          COMPONENT runtime
-          RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
-          LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
-          ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}")
-  set_property(TARGET YARP_wire_rep_utils PROPERTY FOLDER "Libraries/Private")
+#  install(TARGETS YARP_wire_rep_utils
+#          EXPORT YARP
+#          COMPONENT runtime
+#          RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+#          LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+#          ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}")
+#  set_property(TARGET YARP_wire_rep_utils PROPERTY FOLDER "Libraries/Private")
 endif()
